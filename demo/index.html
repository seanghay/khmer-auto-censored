<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Khmer Auto Censored</title>
		<meta name="description" content="Automatically censored Khmer text">
	
		<meta name="og:title" content="Khmer Auto Censored">
		<meta name="og:description" content="Automatically censored Khmer text">
		<meta property="og:type" content="website" />
		<meta property="og:image" content="https://user-images.githubusercontent.com/15277233/178417612-0c4b0c5f-7ff4-486d-b943-f6ae659c3ac1.png" />
		<meta name="og:url" content="https://khmer-censored.netlify.app/">

		<meta name="twitter:card" content="https://user-images.githubusercontent.com/15277233/178417612-0c4b0c5f-7ff4-486d-b943-f6ae659c3ac1.png">
		<meta name="twitter:image" content="https://user-images.githubusercontent.com/15277233/178417612-0c4b0c5f-7ff4-486d-b943-f6ae659c3ac1.png">
		<meta name="twitter:site" content="@seanghay_yath">
		<meta name="twitter:creator" content="@seanghay_yath">
		<meta name="twitter:title" content="Khmer Auto Censored">
		<meta name="twitter:description" content="Automatically censored Khmer text">
		
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css"
		/>
	</head>

	<body>
		<div id="loader" style="max-width: 720px; margin: 0 auto; padding: 2em; display: grid; place-items: center; min-height: 100vh;">
			<h3 style="text-align: center">Loading...</h3>
		</div>
		<div id="app" style="max-width: 720px; margin: 0 auto; padding: 2em; display: none;">
			<h2 style="text-align: center">Khmer Auto Censored</h2>
			
			<label for="input">Text</label>
			<textarea
				style="height: 200px"
				name="input"
				id="input"
				placeholder="Input"
			></textarea>

			<label for="delimiter">Delimiter</label>
			<input style="font-weight: bold" placeholder="Delimiter" type="text" value="." id="delimiter" name="delimiter">

			<label for="output">Result</label>
			
      <textarea
				style="height: 200px"
				name="output"
				id="output"
				placeholder="Output"
			></textarea>

			<br />

			<a href="https://github.com/seanghay/khmer-auto-censored"
				>View on GitHub</a
			>
			<br />
			<small
				>Made with ❤️ by
				<a href="https://github.com/seanghay">@seanghay</a></small
			>
		</div>

		<script type="module">
			import { censored } from "https://unpkg.com/khmer-auto-censored@0.0.2/dist/main.mjs"
			const el = {
				input: document.getElementById("input"),
				output: document.getElementById("output"),
				loader: document.getElementById('loader'),
				app: document.getElementById('app'),
				delimiter: document.getElementById('delimiter')
			}

			el.input.addEventListener("input", invalidate)
			el.delimiter.addEventListener("input", invalidate)

			function invalidate() {
				if (!el.input.value) {
					el.output.value = ""
					return
				}
				const del = el.delimiter.value;
				el.output.value = censored(el.input.value, del)
			}

			el.app.style.display = 'block';
			el.loader.style.display = 'none';
		</script>
	</body>
</html>
